# =============================================================================
# EMPIRICA CASCADE STYLE PROFILES
# =============================================================================
# 
# Purpose: Dynamic threshold configuration for Meta-Agent Configuration Objects
# Usage: Loaded by ThresholdLoader, switched by Sentinel or bootstrap
# 
# Profile Selection Guide:
#   - default: Balanced for general development work
#   - exploratory: Low barriers, encourage investigation and learning
#   - rigorous: High standards for production-ready code
#   - rapid: Fast iteration, accept higher uncertainty
#   - expert: For high-capability AIs with strong domain knowledge
#   - novice: For learning AIs, more investigation cycles required
#
# Architecture: Part of MCO (Meta-Agent Configuration Object)
#   - Personas (epistemic priors): config/mco/personas.yaml
#   - CASCADE styles (thresholds): config/mco/cascade_styles.yaml (this file)
#   - Protocols (schema): config/mco/protocols.yaml
#   - Model profiles (bias): config/mco/model_profiles.yaml
#

metadata:
  version: "1.0.0"
  last_updated: "2025-01-29"
  default_profile: "default"
  author: "Empirica Framework"

# =============================================================================
# PROFILE DEFINITIONS
# =============================================================================

profiles:

  # ---------------------------------------------------------------------------
  # DEFAULT PROFILE (Balanced - Current Production Values)
  # ---------------------------------------------------------------------------
  default:
    name: "Default Balanced"
    description: "General purpose, balanced thresholds for development work"
    
    # Engagement Gate (must be >= 0.60 to proceed)
    engagement_threshold: 0.60
    
    # Critical Thresholds (system actions)
    critical:
      coherence_min: 0.50      # Below this → RESET sequence
      density_max: 0.90        # Above this → RESET (cognitive overload)
      change_min: 0.50         # Below this → STOP execution
    
    # Uncertainty Thresholds
    uncertainty:
      low: 0.70               # < 0.70 uncertainty = proceed confidently
      moderate: 0.30          # 0.30-0.70 = proceed with caution
      high: 0.70              # > 0.70 = investigate required
    
    # Comprehension Thresholds
    comprehension:
      high: 0.80              # High comprehension bar
      moderate: 0.50          # Moderate comprehension bar
      clarity_min: 0.50       # Minimum semantic clarity
      signal_min: 0.50        # Minimum signal-to-noise
      coherence_min: 0.50     # Minimum context coherence
    
    # Execution Thresholds
    execution:
      high: 0.80              # High execution confidence
      moderate: 0.60          # Moderate execution confidence
      state_mapping_min: 0.60 # Minimum environment understanding
      completion_min: 0.80    # Minimum completion confidence
      impact_min: 0.50        # Minimum consequence understanding
    
    # Confidence Thresholds
    confidence:
      high: 0.85              # High confidence bar
      moderate: 0.70          # Moderate confidence bar
      low: 0.50               # Low confidence threshold
      goal_orchestrator: 0.70 # Goal system confidence requirement
    
    # CASCADE Control
    cascade:
      max_investigation_rounds: 7              # Maximum INVESTIGATE cycles
      check_confidence_to_proceed: 0.70        # CHECK phase confidence gate
      preflight_engagement_min: 0.60           # PREFLIGHT engagement requirement
      postflight_calibration_enabled: true     # Enable calibration tracking

  # ---------------------------------------------------------------------------
  # EXPLORATORY PROFILE (Research, Prototyping, Learning)
  # ---------------------------------------------------------------------------
  exploratory:
    name: "Exploratory Research"
    description: "Low barriers to encourage investigation, learning, and creative exploration"
    
    engagement_threshold: 0.50  # Lower barrier to start exploration
    
    critical:
      coherence_min: 0.40      # More tolerance for messiness during research
      density_max: 0.95        # Can handle higher complexity
      change_min: 0.40         # Lower bar for progress tracking
    
    uncertainty:
      low: 0.80               # High uncertainty acceptable for exploration
      moderate: 0.40          # Wider moderate uncertainty band
      high: 0.60              # Investigate sooner (at lower uncertainty)
    
    comprehension:
      high: 0.70              # Lower comprehension standards
      moderate: 0.40          # Acceptable ambiguity
      clarity_min: 0.40       # Can work with less clarity
      signal_min: 0.40        # More noise tolerated
      coherence_min: 0.40     # Less strict context requirements
    
    execution:
      high: 0.70              # Lower execution confidence needed
      moderate: 0.50          # More experimentation allowed
      state_mapping_min: 0.50 # Partial environment understanding OK
      completion_min: 0.70    # Can iterate toward completion
      impact_min: 0.40        # Experimenting with consequences
    
    confidence:
      high: 0.75              # Lower confidence bars
      moderate: 0.60          
      low: 0.40               
      goal_orchestrator: 0.60 # Goals can be more exploratory
    
    cascade:
      max_investigation_rounds: 10             # More investigation allowed
      check_confidence_to_proceed: 0.60        # Lower confidence gate
      preflight_engagement_min: 0.50           # Easy engagement
      postflight_calibration_enabled: true     # Track learning aggressively

  # ---------------------------------------------------------------------------
  # RIGOROUS PROFILE (Production, Critical Systems)
  # ---------------------------------------------------------------------------
  rigorous:
    name: "Rigorous Production"
    description: "High standards for production-ready, mission-critical code"
    
    engagement_threshold: 0.70  # Higher bar to ensure serious engagement
    
    critical:
      coherence_min: 0.60      # Stricter coherence requirements
      density_max: 0.85        # Lower tolerance for complexity (keep it simple)
      change_min: 0.60         # Need clear progress indicators
    
    uncertainty:
      low: 0.60               # Low tolerance for uncertainty
      moderate: 0.20          # Narrow moderate band (most things need investigation)
      high: 0.80              # Investigate at lower uncertainty threshold
    
    comprehension:
      high: 0.90              # Very high comprehension standards
      moderate: 0.70          # Even moderate requires strong understanding
      clarity_min: 0.70       # High clarity required
      signal_min: 0.70        # Low noise tolerance
      coherence_min: 0.70     # Strong context alignment needed
    
    execution:
      high: 0.90              # Near-certain execution confidence
      moderate: 0.75          # High moderate bar
      state_mapping_min: 0.75 # Deep environment understanding
      completion_min: 0.90    # High completion confidence
      impact_min: 0.70        # Strong consequence understanding
    
    confidence:
      high: 0.95              # Very high confidence required
      moderate: 0.85          # High moderate bar
      low: 0.70               # Even "low" is relatively high
      goal_orchestrator: 0.85 # Goals must be well-defined
    
    cascade:
      max_investigation_rounds: 5              # Fewer rounds, expect clarity
      check_confidence_to_proceed: 0.85        # High confidence gate
      preflight_engagement_min: 0.70           # Serious engagement required
      postflight_calibration_enabled: true     # Strict calibration tracking

  # ---------------------------------------------------------------------------
  # RAPID PROFILE (Fast Iteration, Prototyping)
  # ---------------------------------------------------------------------------
  rapid:
    name: "Rapid Iteration"
    description: "Fast development cycles, accept higher uncertainty for speed"
    
    engagement_threshold: 0.50  # Low barrier to start quickly
    
    critical:
      coherence_min: 0.35      # Very loose coherence (iterate fast)
      density_max: 1.0         # No practical overload limit
      change_min: 0.30         # Just need some progress signal
    
    uncertainty:
      low: 0.90               # Very high uncertainty acceptable
      moderate: 0.50          # Wide moderate band
      high: 0.50              # Less investigation (act faster)
    
    comprehension:
      high: 0.60              # Lower comprehension bars
      moderate: 0.30          # Can work with ambiguity
      clarity_min: 0.30       # Minimal clarity needed
      signal_min: 0.30        # High noise tolerance
      coherence_min: 0.30     # Loose context requirements
    
    execution:
      high: 0.60              # Lower execution confidence
      moderate: 0.40          # Experimentation encouraged
      state_mapping_min: 0.40 # Partial understanding OK
      completion_min: 0.60    # Iterate toward completion
      impact_min: 0.30        # Accept uncertain consequences
    
    confidence:
      high: 0.65              # Lower confidence thresholds
      moderate: 0.50          
      low: 0.30               
      goal_orchestrator: 0.50 # Flexible goals
    
    cascade:
      max_investigation_rounds: 3              # Very fast cycles
      check_confidence_to_proceed: 0.50        # Low confidence gate
      preflight_engagement_min: 0.50           # Easy start
      postflight_calibration_enabled: false    # Skip calibration for speed

  # ---------------------------------------------------------------------------
  # EXPERT PROFILE (High-Capability AI)
  # ---------------------------------------------------------------------------
  expert:
    name: "Expert High-Capability"
    description: "For AIs with proven high capability and strong domain knowledge"
    
    engagement_threshold: 0.65  # Moderate engagement bar
    
    critical:
      coherence_min: 0.45      # Experts can handle some messiness
      density_max: 0.92        # High complexity tolerance
      change_min: 0.45         # Can track subtle progress
    
    uncertainty:
      low: 0.75               # Moderate-high uncertainty OK (experts know limits)
      moderate: 0.35          # Reasonable moderate band
      high: 0.75              # Investigate when needed
    
    comprehension:
      high: 0.85              # High standards but not extreme
      moderate: 0.60          # Reasonable moderate understanding
      clarity_min: 0.55       # Can fill in gaps
      signal_min: 0.55        # Good signal detection
      coherence_min: 0.55     # Strong context awareness
    
    execution:
      high: 0.85              # High execution confidence
      moderate: 0.65          # Good moderate bar
      state_mapping_min: 0.65 # Strong environment understanding
      completion_min: 0.85    # High completion confidence
      impact_min: 0.60        # Strong consequence awareness
    
    confidence:
      high: 0.90              # High but achievable
      moderate: 0.75          # Reasonable moderate
      low: 0.55               # Reasonable low threshold
      goal_orchestrator: 0.75 # Well-defined goals
    
    cascade:
      max_investigation_rounds: 6              # Balanced investigation
      check_confidence_to_proceed: 0.75        # Moderate-high confidence gate
      preflight_engagement_min: 0.65           # Moderate engagement
      postflight_calibration_enabled: true     # Track performance

  # ---------------------------------------------------------------------------
  # NOVICE PROFILE (Learning AI, Low Experience)
  # ---------------------------------------------------------------------------
  novice:
    name: "Novice Learning"
    description: "For learning AIs with limited domain knowledge, more guidance needed"
    
    engagement_threshold: 0.55  # Slightly lower to encourage learning
    
    critical:
      coherence_min: 0.55      # Higher coherence requirement (need structure)
      density_max: 0.80        # Lower complexity tolerance
      change_min: 0.55         # Need clear progress markers
    
    uncertainty:
      low: 0.60               # Lower uncertainty tolerance (less confident)
      moderate: 0.25          # Narrow moderate band (investigate more)
      high: 0.85              # Investigate early and often
    
    comprehension:
      high: 0.75              # Need strong comprehension
      moderate: 0.55          # Reasonable moderate understanding
      clarity_min: 0.60       # Need clear instructions
      signal_min: 0.60        # Need clear signal
      coherence_min: 0.60     # Need strong context
    
    execution:
      high: 0.75              # Need confidence to execute
      moderate: 0.60          # Reasonable moderate bar
      state_mapping_min: 0.65 # Need good environment understanding
      completion_min: 0.75    # Need clear completion criteria
      impact_min: 0.60        # Need to understand consequences
    
    confidence:
      high: 0.80              # Achievable high confidence
      moderate: 0.65          # Reasonable moderate
      low: 0.50               # Reasonable low threshold
      goal_orchestrator: 0.70 # Need well-defined goals
    
    cascade:
      max_investigation_rounds: 9              # More investigation cycles
      check_confidence_to_proceed: 0.70        # Standard confidence gate
      preflight_engagement_min: 0.55           # Encourage engagement
      postflight_calibration_enabled: true     # Aggressive learning tracking

# =============================================================================
# NOTES FOR SENTINEL ORCHESTRATOR
# =============================================================================
#
# Profile Selection Logic (recommended):
#   1. Task Type:
#      - Research/exploration → exploratory
#      - Production bug fix → rigorous
#      - Prototype/spike → rapid
#      - Learning task → novice
#   
#   2. AI Capability:
#      - High-performing AI + complex task → expert
#      - New AI + simple task → novice
#      - Standard capability → default
#   
#   3. Project Phase:
#      - Early exploration → exploratory
#      - Pre-release → rigorous
#      - Sprint work → default
#   
#   4. Custom Overrides:
#      - Sentinel can load base profile + override specific thresholds
#      - Example: exploratory + cascade.max_investigation_rounds=5
#
# Handoff Behavior:
#   - Model A executes with profile_A thresholds
#   - Handoff includes: epistemic_state ($\vec{E}$), not thresholds
#   - Sentinel reloads profile_B for Model B based on its capabilities
#   - This allows optimal threshold tuning per model
#
